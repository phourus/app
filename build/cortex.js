!function t(e,r,i){function n(s,u){if(!r[s]){if(!e[s]){var o="function"==typeof require&&require;if(!u&&o)return o(s,!0);if(a)return a(s,!0);var _=new Error("Cannot find module '"+s+"'");throw _.code="MODULE_NOT_FOUND",_}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return n(r?r:t)},l,l.exports,t,e,r,i)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e){"use strict";var r=function(t,e,r){e&&Object.defineProperties(t,e),r&&Object.defineProperties(t.prototype,r)},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.exports=function(){var e=t("./pubsub"),a=t("./data_wrapper")(e),s=function(t){function a(t,e){n(this,a),this.__value=t,this.__path=[],this.__updates=[],this.__callbacks=e?[e]:[],this.__loopProcessing=!1,this.__subscribe(),this.__wrap()}return i(a,t),r(a,null,{on:{value:function(t,e){"update"===t&&this.__callbacks.push(e)},writable:!0,configurable:!0},off:{value:function(t,e){if("update"===t)if(e){for(var r=0,i=this.__callbacks.length;i>r;r++)if(e===this.__callbacks[r]){this.__callbacks.splice(r,1);break}}else this.__callbacks=[]},writable:!0,configurable:!0},update:{value:function(t,e,r){return r||this.__shouldUpdate(t,e)?(this.__updates.push({newValue:t,path:e}),this.__loopProcessing||(this.__loopProcessing=!0,setTimeout(this.__batchAll.bind(this),0)),!0):!1},writable:!0,configurable:!0},__batchAll:{value:function(){this.__batchSetValue(),this.__wrap(),this.__loopProcessing=!1,this.__runCallbacks()},writable:!0,configurable:!0},__batchSetValue:{value:function(){for(var t,e=this.__updates[Symbol.iterator]();!(t=e.next()).done;){var r=t.value;this.__setValue(r.newValue,r.path)}this.__updates=[]},writable:!0,configurable:!0},__runCallbacks:{value:function(){for(var t,e=this.__callbacks[Symbol.iterator]();!(t=e.next()).done;){var r=t.value;r&&r(this)}},writable:!0,configurable:!0},__subscribe:{value:function(){this.__eventId=e.subscribeToCortex(function(t,e){this.update(e.value,e.path,e.forceUpdate)}.bind(this),function(t,e){this.__remove(e.path)}.bind(this))},writable:!0,configurable:!0},__remove:{value:function(t){if(t.length){var e=t.slice(0,t.length-1),r=this.__subValue(e),i=t[t.length-1],n=r[i];return r.constructor===Object?delete r[i]:r.constructor===Array&&r.splice(i,1),this.update(r,e,!0),n}delete this.__wrappers,delete this.__value},writable:!0,configurable:!0},__setValue:{value:function(t,e){if(e.length>1){var r=this.__subValue(e.slice(0,e.length-1));r[e[e.length-1]]=t}else 1===e.length?this.__value[e[0]]=t:this.__value=t},writable:!0,configurable:!0},__subValue:{value:function(t){for(var e=this.__value,r=0,i=t.length;i>r;r++)e=e[t[r]];return e},writable:!0,configurable:!0},__shouldUpdate:{value:function(t,e){for(var r=this.__value,i=0,n=e.length;n>i;i++)r=r[e[i]];return this.__isDifferent(r,t)},writable:!0,configurable:!0},__isDifferent:{value:function(t,e){if(t&&t.constructor===Object){if(!e||e.constructor!==Object||this.__isDifferent(Object.keys(t).sort(),Object.keys(e).sort()))return!0;for(var r in t)if(this.__isDifferent(t[r],e[r]))return!0}else{if(!t||t.constructor!==Array)return t!==e;if(!e||e.constructor!==Array||t.length!==e.length)return!0;for(var i=0,n=t.length;n>i;i++)if(this.__isDifferent(t[i],e[i]))return!0}},writable:!0,configurable:!0}}),a}(a);return"undefined"!=typeof window&&null!==window&&(window.Cortex=s),s}()},{"./data_wrapper":2,"./pubsub":3}],2:[function(t,e){"use strict";var r=function(t,e,r){e&&Object.defineProperties(t,e),r&&Object.defineProperties(t.prototype,r)},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.exports=function(e){var n=function(){function t(e,r,n){i(this,t),this.__eventId=n,this.__value=e,this.__path=r||[],this.__wrap(),this.val=this.getValue}return r(t,null,{set:{value:function(t,r){e.publish("update"+this.__eventId,{value:t,path:this.__path,forceUpdate:r})},writable:!0,configurable:!0},getValue:{value:function(){return this.__value},writable:!0,configurable:!0},getPath:{value:function(){return this.__path},writable:!0,configurable:!0},getKey:{value:function(){return this.__path[this.__path.length-1]},writable:!0,configurable:!0},forEach:{value:function(t){if(this.__isObject())for(var e in this.__wrappers)t(e,this.__wrappers[e],this.__wrappers);else this.__isArray()&&this.__wrappers.forEach(t)},writable:!0,configurable:!0},remove:{value:function(){e.publish("remove"+this.__eventId,{path:this.__path})},writable:!0,configurable:!0},__wrap:{value:function(){var e;if(this.__cleanup(),this.__isObject()){this.__wrappers={};for(var r in this.__value)e=this.__path.slice(),e.push(r),this.__wrappers[r]=new t(this.__value[r],e,this.__eventId),this[r]=this.__wrappers[r]}else if(this.__isArray()){this.__wrappers=[];for(var i=0,n=this.__value.length;n>i;i++)e=this.__path.slice(),e.push(i),this.__wrappers[i]=new t(this.__value[i],e,this.__eventId),this[i]=this.__wrappers[i]}},writable:!0,configurable:!0},__cleanup:{value:function(){if(this.__wrappers){if(this.__isObject())for(var t in this.__wrappers)delete this[t];else if(this.__isArray())for(var e=0,r=this.__wrappers.length;r>e;e++)delete this[e];delete this.__wrappers}},writable:!0,configurable:!0},__forceUpdate:{value:function(){this.set(this.__value,!0)},writable:!0,configurable:!0},__isObject:{value:function(){return this.__value&&this.__value.constructor===Object},writable:!0,configurable:!0},__isArray:{value:function(){return this.__value&&this.__value.constructor===Array},writable:!0,configurable:!0}}),t}(),a=t("./wrappers/array"),s=t("./wrappers/hash"),u=function(t,e){for(var r,i=e[Symbol.iterator]();!(r=i.next()).done;){var n=r.value;for(var a in n)t.prototype[a]=n[a]}};return u(n,[a,s]),n}},{"./wrappers/array":4,"./wrappers/hash":5}],3:[function(t,e){"use strict";var r=function(t,e,r){e&&Object.defineProperties(t,e),r&&Object.defineProperties(t.prototype,r)},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.exports=function(){var t=function(){function t(){i(this,t),this.uid=-1,this.topics={}}return r(t,null,{subscribe:{value:function(t,e){this.topics.hasOwnProperty(t)||(this.topics[t]=[]),this.topics[t].push({callback:e})},writable:!0,configurable:!0},publish:{value:function(t,e){if(!this.topics.hasOwnProperty(t))return!1;var r=this.topics[t],i=function(){for(var i=0,n=r.length;n>i;i++)r[i].callback(t,e)};return i(),!0},writable:!0,configurable:!0},subscribeToCortex:{value:function(t,e){return this.uid+=1,this.subscribe("update"+this.uid,t),this.subscribe("remove"+this.uid,e),this.uid},writable:!0,configurable:!0},unsubscribeFromCortex:{value:function(t){delete this.topics["update"+t],delete this.topics["remove"+t]},writable:!0,configurable:!0}}),t}();return new t}()},{}],4:[function(t,e){"use strict";var r={count:function(){return this.__value.length},map:function(t){return this.__wrappers.map(t)},filter:function(t,e){return this.__wrappers.filter(t,e)},find:function(t){for(var e=0,r=this.__wrappers.length;r>e;e++)if(t(this.__wrappers[e],e,this.__wrappers))return this.__wrappers[e];return null},findIndex:function(t){for(var e=0,r=this.__wrappers.length;r>e;e++)if(t(this.__wrappers[e],e,this.__wrappers))return e;return-1},push:function(t){var e=this.__value.push(t);return this.__forceUpdate(),e},pop:function(){var t=this.__value.pop();return this.__forceUpdate(),t},unshift:function(t){var e=this.__value.unshift(t);return this.__forceUpdate(),e},shift:function(){var t=this.__value.shift();return this.__forceUpdate(),t},insertAt:function(t,e){var r=[t,0].concat(e);Array.prototype.splice.apply(this.__value,r),this.__forceUpdate()},removeAt:function(t,e){(isNaN(e)||0>=e)&&(e=1);var r=this.__value.splice(t,e);return this.__forceUpdate(),r}};e.exports=r},{}],5:[function(t,e){"use strict";var r={keys:function(){return Object.keys(this.__value)},values:function(){var t,e=[];for(t in this.__value)e.push(this.__value[t]);return e},hasKey:function(t){return null!=this.__value[t]},destroy:function(t){var e=this.__value[t];return delete this.__value[t],this.__forceUpdate(),e},"delete":function(t){return console.warn("Method deprecated! Please use .destroy(key) method"),this.remove(t)},add:function(t,e){return this.__value[t]=e,this.__forceUpdate(),e}};e.exports=r},{}]},{},[1]);